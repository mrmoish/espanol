<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ESPAÑOL</title>
    <style>
        body { 
            display: flex; /* Используем flexbox для центрирования содержимого */

            height: 100vh; /* Высота страницы 100% для центрирования по вертикали */
            align-items: center; /* Центрируем содержимое по вертикали */

            justify-content: center; /* Центрируем содержимое по горизонтали */
            text-align: center; /* Центрируем текст потомков */

            margin: 0; /* Убираем отступы, чтобы высота не превышала 100% */
            font-family: Tahoma, sans-serif;
            font-size: 3em;
        }

        #displaySeparator { /* Разделитель с текстом ' - или - ' */
            font-size: 0.5em; /* Размер шрифта уменьшен вдвое */
        }

        .separatorLines::before,
        .separatorLines::after{
            /* до и после 'или' эта линия */
            content: ' ——— ';
        }

        #displaySeparator + div {
            /* Уменьшаем межстрочный интервал, чтобы текст был ближе к разделителю */
            /* для более точного вертикального центрирования */
            line-height: 0.9em;
        }

        .hidden { /* Класс для скрытия элемента */
            display: none;
        }
    </style>
</head>
<body>

    <div>
        <div id="displayFirst">Hola!</div>
        <div id="displaySeparator" class="hidden"></div>
        <div id="displaySecond" class="hidden"></div>
    </div>

    <script>
    // Массив для хранения глаголов
    let verbs = [];
    loadVerbs(); // Загружаем глаголы в массив

    let displayState = 0; // Переменная для отслеживания текущего состояния отображения

    let currentVerbParts; // Переменная для хранения частей текущего глагола (оригинал и перевод)

    // Обработчик клика на странице
    document.addEventListener("click", function(event) {
        // Обрабатываем действия в зависимости от текущего состояния отображения (displayState)

        switch (displayState) {
            case 0:
                // Первое состояние: отображаем случайный глагол
                displayState = 1; // Переходим ко второму состоянию

                // Скрываем разделитель (отображается в третьем состоянии)
                document.getElementById('displaySeparator').classList.add('hidden');

                // Генерируем случайный индекс в пределах массива verbs
                const randomIndex = Math.floor(Math.random() * verbs.length);

                // Получаем глагол и его перевод как массив
                currentVerbParts = verbs[randomIndex].split('–');

                // Показываем случайный глагол
                document.getElementById("displayFirst").textContent = currentVerbParts[0];
                break;

            case 1:
                // Второе состояние: отображаем случайный правильный и неправильный перевод глагола
                displayState = 2; // Переходим к третьему состоянию

                // Генерируем случайный индекс для получения неверного перевода
                const randomIndex2 = Math.floor(Math.random() * verbs.length);

                // Извлекаем неверный перевод из массива
                let falseTranslation = verbs[randomIndex2].split('–')[1]; // Неверный ответ
                let correctTranslation = currentVerbParts[1]; // Верный ответ

                // Записываем разделитель (в третьем состоянии перезаписывался)
                document.getElementById("displaySeparator").textContent = ' или ';
                // Добавляем линии разделения
                document.getElementById('displaySeparator').classList.add('separatorLines');
                // Отображаем разделитель и второй блок (в первом состояние скрыты)
                document.getElementById('displaySeparator').classList.remove('hidden');
                document.getElementById('displaySecond').classList.remove('hidden');

                // Случайным образом определяем порядок отображения вариантов перевода
                if (Math.random() < 0.5) {
                    document.getElementById("displayFirst").textContent = correctTranslation;
                    document.getElementById("displaySecond").textContent = falseTranslation;
                } else {
                    document.getElementById("displayFirst").textContent = falseTranslation;
                    document.getElementById("displaySecond").textContent = correctTranslation;
                }
                break;

            default:
                // Третье состояние: показываем правильный перевод текущего глагола
                displayState = 0; // Сбрасываем состояние

                // Отображаем правильный ответ и оригинальный глагол
                document.getElementById("displayFirst").textContent = currentVerbParts[1];
                document.getElementById("displaySeparator").textContent = currentVerbParts[0];

                // Убираем линии разделения
                document.getElementById('displaySeparator').classList.remove('separatorLines');

                // Скрываем второй блок
                document.getElementById('displaySecond').classList.add('hidden');
                break;
        }
    });

    // Функция для загрузки файла с глаголами
    function loadVerbs() {
        // Используем fetch для загрузки файла с сервера
        fetch('verbs')
            .then(response => {
                // Проверяем, успешно ли загрузился файл
                if (!response.ok) throw new Error("Ошибка загрузки файла");
                // Если загрузка успешна, возвращаем содержимое как текст
                return response.text();
            })
            .then(content => {
                // Разбиваем загруженное содержимое на массив строк по символу новой строки
                const lines = content.split("\n");

                // Фильтруем массив, оставляя только непустые строки (удаляем строки, которые содержат только пробелы)
                verbs = lines.filter(line => line.trim() !== "");
            })
            // Обрабатываем ошибки, если загрузка не удалась, и выводим их в консоль
            .catch(error => console.error("Ошибка:", error));
    }
    </script>
</body>
</html>